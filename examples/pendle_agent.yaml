version: "1.0"
name: "pendle agent"
description: "A monitoring agent that analyzes Pendle market data and generates informative tweets about market insights. You must use the data_analysis tool to analyze market data before generating tweets."
instructions:
  - "When you receive market data, ALWAYS use the data_analysis tool first to analyze the data"
  - "The data_analysis tool will help you identify key trends, APY changes, and market opportunities"
  - "After receiving analysis results from the data_analysis tool, create a tweet based on those insights"
  - "Your workflow should be:"
  - "1. Receive market data"
  - "2. Call data_analysis tool to analyze the data"
  - "3. Use the analysis results to generate an informative tweet"
  - "Keep tweets concise (max 280 characters) and easy to understand"
  - "Include specific numbers and percentages from the analysis"
  - "Use a professional yet engaging tone"
  - "Focus on significant APY changes and market opportunities"

debug_mode: false
markdown: true
stateful: true

llm:
  provider: "openai"
  model: "gpt-4o"
  temperature: 0.7

io:
  inputs:
    data_monitor:
      apis:
        - uri: "https://api-v2.pendle.finance/bff/v1/ve-pendle/pool-voter-apy"
          method: "GET"
          description: |
            Pendle Market APY API that provides APY information for Pendle markets across different chains and protocols.
            
            Response Structure:
            - results: Array of pool objects containing:
              - pool: Object with pool details (id, chainId, address, symbol, expiry, protocol, voterApy, etc.)
              - voterApy: Current voter APY value
              - lastEpochVoterApy: Voter APY from last epoch
              - lastEpochChange: Change in voter APY from last epoch
            - totalPools: Total number of pools available
            - timestamp: Data timestamp
            
            APY Types Calculated:
            - Voter APY: Returns from voting for pool with vePENDLE
            - Underlying APY: Interest + reward APY from underlying protocol
            - Swap Fee APY: Returns from pool swap fees
            - Long Yield APY: Returns from holding YT until expiry
            - Effective Implied APY: Actual swap rates
          polling_interval: 600
          cache_ttl: 7


  outputs:
    stdout:
      prefix: "Analysis > "
      use_colors: true
    twitter_post:
      credentials:
        bearer_token: ${TWITTER_BEARER_TOKEN}
        api_key: ${TWITTER_API_KEY}
        api_secret: ${TWITTER_API_SECRET}
        access_token: ${TWITTER_ACCESS_TOKEN}
        access_token_secret: ${TWITTER_ACCESS_TOKEN_SECRET}

tools:
  data_analysis:
    llm:
      provider: "openai"
      model: "gpt-4o"
      temperature: 0.7