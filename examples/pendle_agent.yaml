version: "1.0"
name: "pendle agent"
description: "A monitoring agent that analyzes Pendle market data and generates informative tweets about market insights"
instructions:
  - "Analyze market data to identify key trends and changes in APY metrics"
  - "Generate concise and engaging tweets based on the analysis results"
  - "Keep tweets informative yet easy to understand for the crypto community"
  - "Include relevant APY changes and market opportunities in tweets"
  - "Maintain a professional but friendly tone"
  - "Format numbers and percentages clearly"

debug_mode: false
markdown: true
stateful: true

llm:
  provider: "openai"
  model: "gpt-4o"
  temperature: 0.7

io:
  inputs:
    twitter_user_stream:
      credentials:
        bearer_token: ${TWITTER_BEARER_TOKEN}
      usernames: ["ysdpk"]
    data_monitor:
      apis:
        - uri: "https://api-v2.pendle.finance/bff/v1/ve-pendle/pool-voter-apy"
          method: "GET"
          description: |
            Pendle Market APY API that provides APY information for Pendle markets across different chains and protocols.
            
            Response Structure:
            - results: Array of pool objects containing:
              - pool: Object with pool details (id, chainId, address, symbol, expiry, protocol, voterApy, etc.)
              - voterApy: Current voter APY value
              - lastEpochVoterApy: Voter APY from last epoch
              - lastEpochChange: Change in voter APY from last epoch
            - totalPools: Total number of pools available
            - timestamp: Data timestamp
            
            APY Types Calculated:
            - Voter APY: Returns from voting for pool with vePENDLE
            - Underlying APY: Interest + reward APY from underlying protocol
            - Swap Fee APY: Returns from pool swap fees
            - Long Yield APY: Returns from holding YT until expiry
            - Effective Implied APY: Actual swap rates
          polling_interval: 600
          cache_ttl: 7


  outputs:
    stdout:
      prefix: "Analysis > "
      use_colors: true
    twitter_post:
      credentials:
        bearer_token: ${TWITTER_BEARER_TOKEN}
        api_key: ${TWITTER_API_KEY}
        api_secret: ${TWITTER_API_SECRET}
        access_token: ${TWITTER_ACCESS_TOKEN}
        access_token_secret: ${TWITTER_ACCESS_TOKEN_SECRET}

tools:
  token_price:
    coingecko_api_key: ${COINGECKO_API_KEY}
